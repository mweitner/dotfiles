# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font pango:monospace 8
#font pango:Inconsolata NF 12
# next try to activate DroidSansMono
font pango:DroidSansMonoForPowerline Nerd Font, FontAwesome, 9

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
#bindsym $mod+Return exec i3-sensible-terminal
bindsym $mod+Return exec urxvtc

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
bindsym $mod+d exec --no-startup-id dmenu_run
# A more modern dmenu replacement is rofi:
# bindcode $mod+40 exec "rofi -modi drun,run -show drun"
# There also is i3-dmenu-desktop which only displays applications shipping a
# .desktop file. It is a wrapper around dmenu, so you need that installed.
# bindcode $mod+40 exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
#mweitner for me is horizontal split left/right
bindsym $mod+Control+v split h

# split in vertical orientation
#mweitner for me is vertical split down/up
# changed from h (horizontal) to n because Control+h already used
bindsym $mod+Control+n split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# inspired by freebsd forum about sticky floating window
# when switching workspace (container)
# typically use $mod+Shift+s is already reserved for
# my 1password floating window to remember s like security
# instead using g for glue ;-)
bindsym $mod+Shift+g sticky toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1term "term"
set $ws2web "web"
set $ws3dev "dev"
set $ws4vm "vm"
set $ws5rdp "rdp"
set $ws6web2 "web2"
set $ws7dev2 "dev2"
set $ws8dev3 "dev3"
set $ws9dev4 "dev4"
set $ws10dev5 "dev5"

# switch to workspace
bindsym $mod+1 workspace number 1 $ws1term
bindsym $mod+2 workspace number 2 $ws2web
bindsym $mod+3 workspace number 3 $ws3dev
bindsym $mod+4 workspace number 4 $ws4vm
bindsym $mod+5 workspace number 5 $ws5rdp
bindsym $mod+6 workspace number 6 $ws6web2
bindsym $mod+7 workspace number 7 $ws7dev2
bindsym $mod+8 workspace number 8 $ws8dev3
bindsym $mod+9 workspace number 9 $ws9dev4
bindsym $mod+0 workspace number 10 $ws10dev5

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1 $ws1term
bindsym $mod+Shift+2 move container to workspace number 2 $ws2web
bindsym $mod+Shift+3 move container to workspace number 3 $ws3dev
bindsym $mod+Shift+4 move container to workspace number 4 $ws4vm
bindsym $mod+Shift+5 move container to workspace number 5 $ws5rdp
bindsym $mod+Shift+6 move container to workspace number 6 $ws6web2
bindsym $mod+Shift+7 move container to workspace number 7 $ws7dev2
bindsym $mod+Shift+8 move container to workspace number 8 $ws8dev3
bindsym $mod+Shift+9 move container to workspace number 9 $ws9dev4
bindsym $mod+Shift+0 move container to workspace number 10 $ws10dev5

# move focused window to workspace and switch to target workspace
bindsym $mod+Control+1 move container to workspace number 1 $ws1term; workspace number 1 $ws1term
bindsym $mod+Control+2 move container to workspace number 2 $ws2web; workspace number 2 $ws2web
bindsym $mod+Control+3 move container to workspace number 3 $ws3dev; workspace number 3 ws3dev
bindsym $mod+Control+4 move container to workspace number 4 $ws4vm; workspace number 4 $ws4vm
bindsym $mod+Control+5 move container to workspace number 5 $ws5rdp; workspace number 5 $ws5rdp
bindsym $mod+Control+6 move container to workspace number 6 $ws6web2; workspace number 6 $ws6web2
bindsym $mod+Control+7 move container to workspace number 7 $ws7dev2; workspace number 7 $ws7dev2
bindsym $mod+Control+8 move container to workspace number 8 $ws8dev3; workspace number 8 $ws8dev3
bindsym $mod+Control+9 move container to workspace number 9 $ws9dev4; workspace number 9 $ws9dev4
bindsym $mod+Control+10 move container to workspace number 10 $ws10dev5; workspace number 10 $ws10dev5

# move workspace between monitors
bindsym $mod+Control+m move workspace to output primary
bindsym $mod+Control+s move workspace to output HDMI-1
bindsym $mod+Control+l move workspace to output right
bindsym $mod+Control+h move workspace to output left

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
#bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
# replaced by shutdown / restart / suspend menu
set $mode_system \
      System \
      (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Ctrl+s) shutdown

mode "$mode_system" {
  bindsym l exec --no-startup-id $i3lockwall, mode "default"
  bindsym e exec --no-startup-id i3-msg exit, mode "default"
  bindsym r exec --no-startup-id sudo systemctl reboot, mode "default"
  bindsym s exec --no-startup-id $i3lockwall && (sleep 0.5 && sudo systemctl suspend), \
    mode "default"
  bindsym h exec --no-startup-id $i3lockwall && sudo systemctl hibernate, \
    mode "default"
  bindsym Control+s exec --no-startup-id sudo systemctl poweroff -i, \
    mode "default"

  #to close the menu: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

bindsym $mod+BackSpace mode "$mode_system"

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+r mode "resize"

# our customiyed i3bar
bar {
    status_command i3status --config ~/.config/i3/i3status.conf
    
    # Disable all tray icons
    tray_output none

    # tray_output primary
    colors {
        background $black2
        statusline $white2
        separator $white2

        # border background text
        focused_workspace 	$background $background $red1
        active_workspace 	$black2 $black1 $white2
        inactive_workspace 	$black1 $black2 $foreground
        urgent_workspace 	$red1 $red1 $white2
        binding_mode 		$background $red2 $white2
    }
}

workspace_auto_back_and_forth yes
assign [class="firefox" instance="Navigator"] 2 $ws2web
#make sure google meet works, otherwise it opens in new window and blocks
for_window [class="firefox" title="Share your new meeting*"] floating enabled
for_window [class="firefox" instance="Places" ] floating enabled
#do not want mouse set window in focus
focus_follows_mouse no
set $i3lockwall sh "$HOME/.config/i3/scripts/lock.sh"
bindsym $mod+Control+Shift+l exec --no-startup-id $i3lockwall
#wallpaper
exec --no-startup-id feh --no-fehbg --bg-fill \
  "$HOME/.config/i3/feh/nature-g2658ad761_1920.jpg"
#floating windows
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [class="Arandr"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Spotify"] floating enable
for_window [class="vlc"] floating enable

# virtual box mmnager, 
# WM_NAME("Oracle VM VirtualBox Manager")
# WM_CLASS("VirtualBox Manager", *)
#for_window [class="VirtualBox Manager"] floating enabled
assign [class="VirtualBox Manager" instance="VirtualBox Manager"] 4 $ws4vm

# KVM Virtual Machine Manager
# WM_NAME("Virtual Machine Manager")
# WM_CLASS("virt-manager", "Virt-manager")
# important use second param as class which starts with big letter V
#for_window [class="Virt-manager"] floating enabled
assign [class="Virt-manager"] 4 $ws4vm

########
# design resources
########
# special
set_from_resource $foreground foreground #C6C6C6
set_from_resource $background background #1C1C1C
set_from_resource $cursorColor cursorColor #C6C6C6
# black
set_from_resource $black1 color0 #303030
set_from_resource $black2 color8 #444444
set $trueblack #000000
# red
set_from_resource $red1 color1 #d75f5f
set_from_resource $red2 color9 #d75f5f
# green
set_from_resource $green1 color2 #87AF87
set_from_resource $green2 color10 #87AF87
# yellow
set_from_resource $yellow1 color3 #ffd75f
set_from_resource $yellow2 color11 #ffd75f
# blue
set_from_resource $blue1 color4 #87afd7
set_from_resource $blue2 color12 #87afd7
# magenta
set_from_resource $cyan1 color5 #afafd7
set_from_resource $cyan2 color13 #afafd7
# cyan
set_from_resource $cyan1 color6 #afd7ff
set_from_resource $cyan2 color14 #afd7ff
# white
set_from_resource $white1 color7 #4E4E4E
set_from_resource $white2 color15 #ffffff

##########
# DESIGN #
##########

# hide borders
hide_edge_borders both

# class border backgr. text indicator child_border 
client.focused 		#333333 $black2 $white2 #285577
client.focused_inactive #333333 $background $foreground #484e50
client.unfocused 	#333333 #222222 #888888 #292d2e #222222
client.urgent 		$red1 $red1 $white2 $red1 $red1
client.placeholder 	#000000 #0c0c0c $white2 #000000 #0c0c0c

for_window [class="URxvt*"] border pixel 1

# Terminal scratchpad
for_window [instance="urxvt_scratchpad"] move to scratchpad, border none
bindsym $mod+Shift+t [instance="urxvt_scratchpad"] scratchpad show
#exec urxvtc -name urxvt_scratchpad -e vim '/tmp/vim-tmp.md'
exec urxvtc -name urxvt_scratchpad -e tmuxp load term-scratchpad -s term-sp

# htop scratchpad
for_window [instance="htop_scratchpad"] move to scratchpad, border none
bindsym $mod+Shift+p [instance="htop_scratchpad"] scratchpad show
exec urxvtc -name htop_scratchpad -e htop

# qutebrowser scratchpad
for_window [instance="qutebrowser"] floating enable
for_window [instance="qutebrowser"] resize 825 800
# move qutebrowser window to scratchpad which hides it automatically
for_window [instance="qutebrowser"] move scratchpad
for_window [instance="qutebrowser"] border none
exec --no-startup-id qutebrowser --target window
bindsym $mod+Shift+i [instance="qutebrowser"] scratchpad show ; [instance="qutebrowser"] move position center

# pavucontrol scratchpad
for_window [instance="pavucontrol"] floating enable
for_window [instance="pavucontrol"] resize 825 800
# move pavucontrol window to scratchpad which hides it automatically
for_window [instance="pavucontrol"] move scratchpad
for_window [instance="pavucontrol"] border none
#exec --no-startup-id pavucontrol --target window
bindsym $mod+Shift+a [instance="pavucontrol"] scratchpad show ; [instance="pavucontrol"] move position center

# spotify scratchpad
for_window [instance="spotify"] floating enable
for_window [instance="spotify"] resize 825 800
# move spotify window to scratchpad which hides it automatically
for_window [instance="spotify"] move scratchpad
for_window [instance="spotify"] border none
#exec --no-startup-id spotify --target window
bindsym $mod+Shift+m [instance="spotify"] scratchpad show ; [instance="spotify"] move position center

# whatsapp-app scratchpad
for_window [instance="whatsapp-app"] floating enable
for_window [instance="whatsapp-app"] resize 825 800
# move whatsapp-app window to scratchpad which hides it automatically
for_window [instance="whatsapp-app"] move scratchpad
for_window [instance="whatsapp-app"] border none
#exec --no-startup-id whatsapp-app --target window
bindsym $mod+Shift+n [instance="whatsapp-app"] scratchpad show ; [instance="whatsapp-app"] move position center

# vpn scratchpad
for_window [instance="gpclient"] floating enable
#for_window [instance="gpclient"] resize 825 800
# move gpclient window to scratchpad which hides it automatically
for_window [instance="gpclient"] move scratchpad
#for_window [instance="gpclient"] border none
#exec --no-startup-id gpclient --target window
bindsym $mod+Shift+v [instance="gpclient"] scratchpad show ; [instance="gpclient"] move position center

# 1Password scratchpad
for_window [instance="1password"] floating enable
#for_window [instance="1password"] resize 825 800
# move 1password window to scratchpad which hides it automatically
for_window [instance="1password"] move scratchpad
#for_window [instance="1password"] border none
#exec --no-startup-id 1password --target window
bindsym $mod+Shift+s [instance="1password"] scratchpad show ; [instance="1password"] move position center

# move floating windows with keys
# inspired by faq.i3wm.org 4615 how-can-i-move-a-floating-with-keys
bindsym $mod+m mode "move" focus floating
mode "move" {
  bindsym $mod+Tab focus right

  bindsym Left move left
  bindsym Down move down
  bindsym Up move up
  bindsym Right move right

  bindsym h move left
  bindsym j move down
  bindsym k move up
  bindsym l move right

  #back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

set $mode_display \
      Config monitor resolution -\
      Default config (d), Home laptop (l), Office LDC (o), Home Dell (h)
mode "$mode_display" {
    bindsym d exec --no-startup-id sh "$HOME/.config/X11/monitor.sh", mode "default"
    bindsym l exec --no-startup-id sh "$HOME/.config/X11/monitor-home-laptop.sh", mode "default"
    bindsym o exec --no-startup-id sh "$HOME/.config/X11/monitor-ldc-ulm.sh", mode "default"
    bindsym h exec --no-startup-id sh "$HOME/.config/X11/monitor-ldc-homeoffice.sh", mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+x mode "$mode_display"

set $mode_workspace \
      Workspace layout -\
      Default layout (d), Development (f), Kill all (k)
mode "$mode_workspace" {
  bindsym d exec --no-startup-id sh "$HOME/.config/i3/scripts/load-default-ws.sh", mode default
# bindsym f exec --no-startup-id sh "$HOME/.config/i3/scripts/load-dev-ws.sh", mode default
  bindsym f exec --no-startup-id "$HOME/.config/i3/scripts/load-audiocontrol.sh", mode default
  bindsym k exec --no-startup-id sh "$HOME/.config/i3/scripts/kill-ws.sh", mode default

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+c mode "$mode_workspace"

exec --no-startup-id dunst

